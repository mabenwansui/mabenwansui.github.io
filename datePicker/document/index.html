<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>DatePicker</title>
<meta name="description" content="">
<meta name="keywords" content="">
<script src="src/jquery.js"></script>
<script src="src/datePicker.js"></script>
<link href="../jquery-DatePicker/css/style.css" rel="stylesheet">
<link href="src/style.css" rel="stylesheet">
<link href="src/SyntaxHighlighter/styles/shCoreDefault.css" rel="stylesheet" />
<script src="src/SyntaxHighlighter/scripts/shCore.js"></script>
<script src="src/SyntaxHighlighter/scripts/shBrushJScript.js"></script>
</head>
<body>
<div id="box">
  <nav id="nav">
    <div class="logo">Date<span>Picker</span></div>
    <ul>
      <li data-page="rule">介绍</li>
      <li data-page="range">时间范围</li>
      <li data-page="sidebar">底边栏</li>
      <li data-page="hms">显示时分秒</li>
      <li data-page="error">出错提醒</li>
      <li data-page="method">插件方法</li>
      <li data-page="example">常用示例</li>
      <li data-page="skin">皮肤</li>
    </ul>
  </nav>
  <article id="article">
    <div class="wrap"></div>
  </article>
  <aside id="aside"></aside>
</div>

<script type="text/template" id="rule">
  <section class="template-info">
    <h2>安装地址</h2>
    <ul>
      <li><a href="http://cnpm.lietou.com/package/@liepin/jquery-DatePicker" target="_blank">http://cnpm.lietou.com/package/@liepin/jquery-DatePicker</a></li>
    </ul>
    <h2>DatePicker</h2>
    <ul>
      <li>
        DatePicker是一款日历插件，具有颜值高，使用简单等优点。
      </li>
    </ul>
  </section>

  <section>
    <h2>基本属性</h2>
    <table>
      <thead>
        <tr>
          <th width="100">属性</th>
          <th width="240">默认值</th>
          <th>说明</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>startdate</th>
          <td>2015-03-02</td>
          <td>设定日期的起始选择范围</td>
        </tr>
        <tr>
          <th>enddate</th>
          <td>2015-04-02</td>
          <td>设定日期的末尾选择范围</td>
        </tr>
        <tr>
          <th>btnbar</th>
          <td>false</td>
          <td>是否显示下边框，下边框有返回今日及清空 功能按钮</td>
        </tr>        
        <tr>
          <th>top</th>
          <td>0</td>
          <td>弹框上偏移</td>
        </tr>
        <tr>
          <th>left</th>
          <td>0</td>
          <td>弹框左偏移</td>
        </tr>      
        <tr>
          <th>minyear</th>
          <td>1975</td>
          <td>可以选择的最小年</td>
        </tr>
        <tr>
          <th>maxyear</th>
          <td>2025</td>
          <td>可以选择的最大年</td>
        </tr>
        <tr>
          <th>readonly</th>
          <td>true</td>
          <td>设置文本框是否只读 true, false</td>
        </tr>
        <tr>
          <th>h</th>
          <td>true</td>
          <td>设置时否显示小时选择</td>
        </tr>
        <tr>
          <th>m</th>
          <td>true</td>
          <td>设置时否显示分钟选择</td>
        </tr>
        <tr>
          <th>s</th>
          <td>true</td>
          <td>设置时否显示秒选择</td>
        </tr>
        <tr>
          <th>h_range</th>
          <td>false</td>
          <td>设置小时可选择范围 例: "5-20"代表只能选择5点到20点之间的值</td>
        </tr>
        <tr>
          <th>m_range</th>
          <td>false</td>
          <td>设置分钟可选择范围</td>
        </tr>
        <tr>
          <th>s_range</th>
          <td>false</td>
          <td>设置秒可选择范围</td>
        </tr>                
        <tr>
          <th>zindex</th>
          <td>'auto'</td>
          <td>z轴层级，auto时，会自动获取，建议auto。</td>
        </tr>
        <tr>
          <th>errortext</th>
          <td>请选择$start到$end范围内的日期</td>
          <td>出错时的提示, $start和$end分别代表起始和结束日期</td>
        </tr>       
      </tbody>   
    </table>
  </section>

  <section>
    <h2>回调函数</h2>
    <table>
      <thead>
        <tr>
          <th width="150">属性</th>
          <th>说明</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>callback</th>
          <td>
            选择日期后触发<br />
            第一个参数 "2016-08-09"<br />
            第二个参数 { year: '2016', month:'8', day:'9' }<br />
            可在回调函数内通过 this.fomat('2016-08-09', 'yyyy年MM月dd');  格式化你的日期
          </td>
        </tr>
      </tbody>     
    </table>
  </section>

  <script>refresh();</script>
</script>

<script type="text/template" id="range">
  <section class="template-info">
    <h2>设置时间范围</h2>
    <ul>
      <li>
        开始时间 <input type="text" data-selector="bind-a" />
        <a data-selector="btn-a" class="btn small">源码</a>
        <small>当时间小于2016-06-21时, 不可选择。</small>
      </li>
    </ul>
    <ul>
      <li>
        时间段 <input type="text" value="2016-06-08" data-selector="bind-c" />
        <a data-selector="btn-c" class="btn small">源码</a>
        <small>
          只能选择2016-06-05 到 2016-06-28内的时间。<br />
          注: 当可选年份及月分较少时，将不显示年月选择的下拉框。
        </small>
      </li>
    </ul>
    <h2>将开始结束时间定义在标签上</h2>
    <ul>
      <li>
        <input type="text" data-startdate="2016-05-04" data-enddate="2017-08-09" data-selector="bind-e" />
        <a data-selector="btn-e" class="btn small">源码</a>
          <div class="pre">
        &lt;input 
            type="text"
            data-startdate="2016-05-04"
            data-enddate="2017-08-09"&gt;
            &nbsp;
            $snippet
          </div>         
      </li>
    </ul>
    <h2>设置年份下拉框的可选择范围</h2>
    <ul>
      <li>
        2004-2016 <input type="text" data-selector="bind-d" />
        <a data-selector="btn-d" class="btn small">源码</a>
        <small>
          点击年份下拉框查看效果。
        </small>
      </li>
    </ul>
  </section>
  <script>
    var obj = {
      a : function(){
        $('[data-selector="bind-a"]').DatePicker({
          startdate : '2016-06-21'
        });
      },
      c : function(){
        $('[data-selector="bind-c"]').DatePicker({
          startdate : '2016-06-05',
          enddate : '2016-06-28'
        });
      },
      d : function(){
        $('[data-selector="bind-d"]').DatePicker({
          minyear : '2004',
          maxyear : '2016'
        });
      },
      e : function(){
        $('[data-selector="bind-e"]').DatePicker();
      }
    }
    bindEvent(obj);
  </script>  
</script>

<script type="text/template" id="skin">
  <section class="template-info" style='padding-bottom:150px;'>
    <h2>light-亮色皮肤</h2>
    <ul>
      <li>
        <input type="text" data-selector="bind-a" />
        <a data-selector="btn-a" class="btn small">源码</a>
        <small>正常</small>
      </li>
    </ul>
    <ul>
      <li>
        <input type="text" data-selector="bind-b" />
        <a data-selector="btn-b" class="btn small">源码</a>
        <small>带状态栏的</small>
      </li>      
    </ul>
    <ul>
      <li>
        <input type="text" data-selector="bind-c" />
        <a data-selector="btn-c" class="btn small">源码</a>
        <small>显示时，分，秒的</small>
      </li>      
    </ul>
    <!--
      <h2>gray-灰色皮肤</h2>
      <ul>
        <li>
          <input type="text" data-selector="bind-d" />
          <a data-selector="btn-d" class="btn small">源码</a>
          <small>正常</small>
        </li>
      </ul>
      <ul>
        <li>
          <input type="text" data-selector="bind-e" />
          <a data-selector="btn-e" class="btn small">源码</a>
          <small>带状态栏的</small>
        </li>      
      </ul>
      <ul>
        <li>
          <input type="text" data-selector="bind-f" />
          <a data-selector="btn-f" class="btn small">源码</a>
          <small>显示时，分，秒的</small>
        </li>      
      </ul>
    -->
  </section>
  <script>
    var obj = {
      a : function(){
        $('[data-selector="bind-a"]').DatePicker({
          cssstyle : 'light'
        });
      },
      b : function(){
        $('[data-selector="bind-b"]').DatePicker({
          cssstyle : 'light',
          btnbar : true
        });
      },
      c : function(){
        $('[data-selector="bind-c"]').DatePicker({
          cssstyle : 'light',
          btnbar : true,
          h : true,
          m : true,
          s : true
        });
      },
      d : function(){
        $('[data-selector="bind-d"]').DatePicker({
          cssstyle : 'gray'
        });
      },
      e : function(){
        $('[data-selector="bind-e"]').DatePicker({
          cssstyle : 'gray',
          btnbar : true
        });
      },
      f : function(){
        $('[data-selector="bind-f"]').DatePicker({
          cssstyle : 'gray',
          btnbar : true,
          h : true,
          m : true,
          s : true
        });
      }     
    }
    bindEvent(obj);
  </script>  
</script>

<script type="text/template" id="sidebar">
  <section class="template-info">
    <h2>显示底边栏</h2>
    <ul>
      <li>
        <input type="text" data-selector="bind-a" />
        <a data-selector="btn-a" class="btn small">源码</a>
      </li>
    </ul>
  </section>
  <script>
    var obj = {
      a : function(){
        $('[data-selector="bind-a"]').DatePicker({
          btnbar : true
        });
      }
    }
    bindEvent(obj);
  </script>  
</script>

<script type="text/template" id="hms">
  <section class="template-info">
    <h2>显示时分秒</h2>
    <ul>
      <li>
        <input type="text" value="2016-05-10 10:04:30" data-selector="bind-a" />
        <a data-selector="btn-a" class="btn small">源码</a>
      </li>
    </ul>
    <h2>只显示时分并设置默认时间</h2>
    <ul>
      <li>
        <input type="text" data-selector="bind-b" />
        <a data-selector="btn-b" class="btn small">源码</a>
      </li>
    </ul>
    <h2>设置时分秒的可选范围</h2>
    <ul>
      <li>
        <input type="text" data-selector="bind-d" />
        <a data-selector="btn-d" class="btn small">源码</a>
      </li>
    </ul>    
    <h2>回调格式化</h2>
    <ul>
      <li>
        <input type="text" style="width:200px;" data-selector="bind-c" />
        <a data-selector="btn-c" class="btn small">源码</a>
      </li>
    </ul>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
  </section>
  <script>
    var obj = {
      a : function(){
        $('[data-selector="bind-a"]').DatePicker({
          //h,m,s 默认为false 即不显示时分秒
          //设置初始值
          h : 20, 
          //true会取系统当前时间
          m : true,
          s : true
        });
      },
      b : function(){
        $('[data-selector="bind-b"]').DatePicker({
          h : 10,
          m : 40
        });
      },
      c : function(){
        $('[data-selector="bind-c"]').DatePicker({
          h : true,
          m : true,
          s : true,
          callback : function(date){
            this.element.val( 
              this.format(
                date, 
                'yyyy年MM月dd日 hh时mm分ss秒'
              )
            );
          }
        });
      },
      d : function(){
        $('[data-selector="bind-d"]').DatePicker({
          h : true, 
          m : true,
          s : true,
          h_range : '10',
          m_range : '10-50',
          s_range : '0-30'
        });
      }      
    }
    bindEvent(obj);
  </script>  
</script>

<script type="text/template" id="error">
  <section class="template-info">
    <h2>当点击不可选日期时的提醒</h2>
    <ul>
      <li>
        <input type="text" data-selector="bind-a" />
        <a data-selector="btn-a" class="btn small">源码</a>
        <small>当点击不可选的日期时，会出现出错提醒</small>
      </li>
    </ul>
    <h2>自定义文案</h2>
    <ul>
      <li>
        <input type="text" data-selector="bind-b" />
        <a data-selector="btn-b" class="btn small">源码</a>
        <small>当点击不可选的日期时，会出现出错提醒</small>
      </li>
    </ul>    
  </section>
  <script>
    var obj = {
      a : function(){
        $('[data-selector="bind-a"]').DatePicker({
          startdate : '3000-01-01'
        });
      },
      b : function(){
        $('[data-selector="bind-b"]').DatePicker({
          //$startdate  代表设置的起始时间
          //$enddate    代表设置的结束时间
          errortext : '$start之前的日期不能选，知道了吧',
          startdate : '3000-01-01'
        });
      },
    }
    bindEvent(obj);
  </script>  
</script>

<script type="text/template" id="method">
  <section class="template-info">
    <h2>回调</h2>
    <ul>
      <li>
        callback <input type="text" data-selector="bind-b" />
        <a data-selector="btn-b" class="btn small">源码</a>
        <small>选择日期后, 查看console</small>
      </li>    
    </ul>  
    <h2>插件的方法</h2>
    <ul>
      <li>
        以下方法均可以这样调用
        <small>
          $('element').alertTs('refresh', {});<br />
          $('element').alertTs('refresh');<br />
          $('element').alertTs('rePosition');<br />
          ...
        </small>
      </li>
    </ul>
    <ul>
      <li>
        refresh方法 <input type="text" data-selector="bind-a" />
        <a data-selector="btn-a" class="btn small">源码</a>
      </li>    
    </ul>
    <ul>
      <li>
        rePosition方法
        <small>
          通过$(element).DatePicker('rePosition')来重新刷新弹框位置
        </small>
      </li>    
    </ul>  
    <ul>
      <li>
        show方法
        <small>
          通过$(element).DatePicker('show') 来显示弹层<br>
          也可以在回调中通过this.show()来调用
        </small>
      </li>    
    </ul>
    <ul>
      <li>
        hide方法
        <small>
          通过$(element).DatePicker('hide') 来隐藏弹层<br>
          也可以在回调中通过this.hide()来调用
        </small>
      </li>    
    </ul>   
    <ul>
      <li>
        destroy 销毁
        <small>
          会销毁所有插件产生的事件及dom
        </small>
      </li>    
    </ul>
  </section>
  <script>
    var obj = {
      a : function(){
        var ele = $('[data-selector="bind-a"]');
        ele.DatePicker();
        ele.val('2016-06-01').DatePicker('refresh');
      },      
      b : function(){
        $('[data-selector="bind-b"]').DatePicker({
          callback : function(dateString, dateObject){
            console.log(dateString);
            console.log(
              this.format(dateString, 'yyyy年MM月dd日')
            );
            console.log(dateObject);
          }
        });
      }
    }
    bindEvent(obj);
  </script>    
</script>

<script type="text/template" id="example">
  <section class="template-info">
    <h2>readonly</h2>
    <ul>
      <li> 
        <input type="text" data-selector="bind-c" />
        <a data-selector="btn-c" class="btn small">源码</a>
        <small>插件默认会给文本框加上readonly, 若不想要可设为false</small>
      </li>
    </ul>
    <h2>为input添加disabled</h2>
    <ul>
      <li> 
        <input type="text" disabled="disabled" data-selector="bind-d" />
        <a data-selector="btn-d" class="btn small">源码</a>
        <small>通过添加disabled使日期不能选择</small>
        <div class="pre">
        <input type="text" disabled="disabled" />
          &nbsp;
          $snippet
        </div>
      </li>
    </ul>    
    <h2>日期联动</h2>
    <ul>
      <li>
        <input type="text" data-selector="bind-a" /> 
        <span style="margin-left:5px;">到</span> 
        <input type="text" data-selector="bind-b" />
        <a data-selector="btn-a" class="btn small">源码</a>
        <small>开始日期不能大于结束日期，结束日期不能小于开始日期</small>
        <div class="pre">
          //开始日期
          $('[data-selector="bind-a"]').DatePicker({
            callback : function(date){
              $('[data-selector="bind-b"]')
                .DatePicker('refresh', {
                  startdate : date
              });
            }
          });

          //结束日期
          $('[data-selector="bind-b"]').DatePicker({
            callback : function(date){
              $('[data-selector="bind-a"]')
                .DatePicker('refresh', {
                  enddate : date
              });

              $('[data-selector="bind-c"]')
                .DatePicker('refresh', {
                  startdate : date
              });              
            }
          });
        </div>        
      </li>
    </ul>
  </section>
  <script>
    var obj = {
      a : function(){
        //开始日期
        $('[data-selector="bind-a"]').DatePicker({
          callback : function(date){
            $('[data-selector="bind-b"]').DatePicker('refresh', {
                startdate : date
            });
            if($('[data-selector="bind-b"]').val()===''){
              $('[data-selector="bind-cc"]').DatePicker('refresh', {
                  startdate : date
              });
            }
          }
        });         
      },
      b : function(){
        //结束日期
        $('[data-selector="bind-b"]').DatePicker({
          callback : function(date){
            $('[data-selector="bind-a"]').DatePicker('refresh', {
              enddate : date
            });
            $('[data-selector="bind-cc"]').DatePicker('refresh', {
              startdate : date
            });
          }
        });
      },
      c : function(){
        $('[data-selector="bind-c"]').DatePicker({
          readonly : false
        });
      },
      d : function(){
        $('[data-selector="bind-d"]').DatePicker();
      }      
    }
    bindEvent(obj);
  </script>  
</script>

<script>
  var $nav = $('#nav'),
      $article = $('#article'),
      $aside = $('#aside'),
      asideWidth = $aside.width(),
      refresh = function(){
        SyntaxHighlighter.highlight();
      },
      showSnippet = function(snippet, content){
        $pre = $('#aside pre');
        if(typeof snippet === 'function') snippet = snippet.toString();
        if(/^\s+function/i) snippet = snippet.replace(/^\s*function.*\n/, '').replace(/\s*}.*\n?$/, '');      
        if(content) snippet = content.replace(/^\s*\$snippet.*$/m, snippet);
        snippet = snippet.replace(/\</g,'&lt;').replace(/\>/g,'&gt;');
        $aside.html('<pre class="brush: js;">' + snippet + '</pre>');
        refresh();
      },
      bindEvent = function(obj){
        for(var i in obj) obj[i]();
        $('[data-selector^="btn"]', '.template-info').on('click', function(){
          $('.template-info .btn').removeClass('active');
          $(this).addClass('active');
          var li = $(this).closest('li');
          var eleName = li.find('[data-selector^="bind"]').attr('data-selector').replace('bind-','');
          if( li.find('.pre').length > 0 ){
            showSnippet( obj[eleName], li.find('.pre').html() );
          }else{
            showSnippet( obj[eleName] );       
          }
        });
      }
  $('ul', $nav).on('click', 'li', function(){
    var page = $(this).data('page');
    location.hash = $(this).data('page') || '';
    $(this).addClass('active').siblings().removeClass('active');
    page === 'rule' ? $aside.width(0) : $aside.width(asideWidth);
    $('.wrap', $article).html( $('#'+page).html() );
    $aside.empty();
  });
  $('#article').on('scroll', function(){
    $(this).find('input').DatePicker('rePosition');
  });
  $('[data-page="'+ (location.hash.replace(/^#/,'') || 'rule') +'"]', $nav).trigger('click');
</script>
</body>
</html>